(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(21),i=a(158),o=a(155),l=a(15),u=(Math.sqrt(5),a(16)),s=a(44),m=a.n(s);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach(function(t){p(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h,y=Math.min,E=Math.max,x=Object(u.a)(function(e){return E(y(6e4/3600,6.666666666666666*(.25/e-1)),0)}),b=Object(u.a)(function(e){return E(y(6e4/3600*e,6.666666666666666*(.25-e)),0)}),g={play:!1,time:0,k:.07142857142857142};!function(e){e.TICK="TICK",e.SET_K="SET_K",e.SET_TIME="SET_TIME",e.SET_PLAY="SET_PLAY"}(h||(h={}));var k=Object(u.a)(function(e){return m()(30*-b(e),140*e).map(function(t){return{x0:t/e,t0:0,x1:t/e+30*x(e),t1:30}})}),v=Object(u.a)(function(e,t){var a=t*x(e);return k(e).map(function(e){return e.x0+a})}),w=Object(u.a)(function(e){var t=x(e);return k(e).map(function(e){return e.x0+4.5*t}).filter(function(e){return e>=21&&e<119})}),O=Object(u.a)(function(e){var t=x(e);return k(e).map(function(e){return(21-e.x0)/t}).filter(function(e){return e>=4.5&&e<25.5})}),j=function(e,t){switch(t.type){case h.SET_TIME:return d({},e,{time:t.payload});case h.TICK:return d({},e,{time:(e.time+t.payload)%30});case h.SET_K:return d({},e,{k:t.payload});case h.SET_PLAY:return d({},e,{play:t.payload});default:return e}},S=n.a.createContext({state:g,dispatch:null}),T=a(35),M=a(157),L=a(154),A=a(37),N=a(150),P=a(151),C=a(152),I=a(36),_=a(153),W=a(23),z=a.n(W),K=(a(43),{fontSize:"12px"}),D=n.a.memo(function(e){var t=e.dx,a=e.dy,r=e.latexstring;return n.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(t,", ").concat(a,")")},n.a.createElement("span",{style:K},n.a.createElement(z.a,{math:r})))});function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var R=function(e){return e?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}};var q=n.a.memo(function(){return n.a.createElement("defs",null,n.a.createElement("marker",{id:"arrow",viewBox:"0 0 15 15",refY:"5",refX:"2",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",fill:"black"},n.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})))}),B=(a(133),a(3)),F=a(27);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var J=25,U=30,X=20,G=10,Q="translate(".concat(X,",").concat(J,")"),V=Object(u.a)(function(e,t){return{tScale:Object(A.a)().range([0,e]).domain([0,30]),xScale:Object(A.a)().range([t,0]).domain([0,140])}}),Z=n.a.memo(function(e){var t=e.xScale,a=e.tScale,r=e.k,c=e.lineClass;return n.a.createElement("g",{id:"g-lines"},k(r).map(function(e,r){var i=e.x1,o=e.x0,l=e.t1,u=e.t0;return n.a.createElement("path",{key:r,d:"M".concat(a(u),",").concat(t(o),"L").concat(a(l),",").concat(t(i)),className:c})}))}),$=n.a.memo(function(e){var t=e.time,a=e.xScale,c=e.tScale,i=e.t,o=e.x,l=e.className,u=(e.play,Object(r.useRef)());return Object(r.useLayoutEffect)(function(){Math.abs(t-i)<2?Object(B.c)(u.current).attr("r",0).transition().ease(F.b).duration(350).attr("r",7).attr("stroke-width",4).transition().duration(300).ease(F.b).attr("stroke-width",null).attr("r",4):Object(B.c)(u.current).attr("r",4)},[]),n.a.createElement("circle",{ref:u,className:l,cx:c(i),cy:a(o)})}),ee={},te=function(){var e,t,a,c,i,o=Object(r.useContext)(S).state,l=Object(r.useRef)(),u=function(e){var t=e.width,a=e.height;return{width:Math.max(t-X-G,0),height:Math.max(a-J-U,0)}}((e=l,t=Y(Object(r.useState)(R(e?e.current:null)),2),a=t[0],c=t[1],i=Object(r.useCallback)(function(){return e.current&&c(R(e.current))},[e]),Object(r.useLayoutEffect)(function(){if(e.current)return i(),window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}},[e.current]),a)),s=u.width,m=u.height,f=ae(ee),d=V(s,m),p=d.tScale,h=d.xScale,y=H(Object(r.useMemo)(function(){return[m-h(3),m-h(1.5)]},[h]),2),E=y[0],x=y[1];return n.a.createElement("div",{ref:l,className:f.container},n.a.createElement("svg",{className:f.svg},n.a.createElement(q,null),n.a.createElement("g",{transform:Q},n.a.createElement("mask",{id:"myMask2"},n.a.createElement("rect",{width:s,height:m,fill:"white"})),n.a.createElement("mask",{id:"myMask3"},n.a.createElement("rect",{width:p(o.time),height:m,fill:"white"})),n.a.createElement("g",{id:"g-masked",mask:"url(#myMask2)"},Object(r.createElement)("path",{className:f.road,strokeWidth:m-h(5),d:"M0,0L0,".concat(m),transform:"translate(".concat(p(o.time),",0)")}),n.a.createElement("g",{className:f.maskedLines,mask:"url(#myMask3)"},Object(r.createElement)(Z,{xScale:h,tScale:p,k:o.k,lineClass:f.line})),n.a.createElement("g",{id:"g-cut"},n.a.createElement("rect",{className:f.cut,width:p(21),height:m-h(98),y:h(119),x:p(4.5)}),o.time>=4.5&&w(o.k).map(function(e,t){return n.a.createElement($,{key:e,x:e,t:4.5,tScale:p,xScale:h,time:o.time,play:o.play,className:f.kdot})}),O(o.k).filter(function(e){return e<=o.time}).map(function(e,t){return n.a.createElement($,{key:e,x:21,t:e,tScale:p,xScale:h,time:o.time,play:o.play,className:f.qdot})})),n.a.createElement("g",{id:"g-lane",transform:"translate(".concat(p(o.time),",0)")},n.a.createElement("g",{id:"g-cars"},v(o.k,o.time).map(function(e,t){return n.a.createElement("rect",{key:t,className:f.car,y:h(e),x:-x/2,height:E,width:x})})))),n.a.createElement("g",{id:"vaxis"},n.a.createElement("path",{d:"M0,0L0,".concat(m),fill:"none",stroke:"black",className:f.axis,markerStart:"url(#arrow)"}),n.a.createElement(D,{dx:-10,dy:-25,latexstring:"x \\; \\text{(m)}"})),n.a.createElement("g",{transform:"translate(0,".concat(m,")"),id:"taxis"},n.a.createElement("path",{d:"M0,0L".concat(s,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:f.axis}),n.a.createElement(D,{dx:s-15,dy:5,latexstring:"t \\; \\text{(s)}"})))))},ae=Object(M.a)({path:{strokeWidth:"4px",fill:"none",stroke:N.a.A700,opacity:.8},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:N.a.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:T.a[700],strokeWidth:"2px",fill:P.a.A200,fillOpacity:.2},car:{fill:C.a.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:T.a[300]},axis:{strokeWidth:"2px",color:T.a[800]},qdot:{fill:I.a.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:_.a.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}}),re=a(11),ne=a(159);function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,c=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw c}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ie=Object(re.a)(function(e){return{root:{color:e.palette.primary.main,marginBottom:"15px"}}})(ne.a),oe={},le=function(){var e=Object(r.useContext)(S),t=e.state,a=e.dispatch,c=t.play,u=ue(oe);return function(e,t){var a=Object(r.useRef)(0);a.current=e,Object(r.useLayoutEffect)(function(){if(t){var e=0,r=Object(l.c)(function(t){var r=(t-e)/1e3;e=t,a.current&&a.current(r)});return function(){return r.stop()}}},[t])}(function(e){e/=.25,a({type:h.TICK,payload:e})},c),n.a.createElement(L.a,{direction:"column",container:!0,className:u.main,alignItems:"stretch",spacing:3},n.a.createElement(L.a,{item:!0},n.a.createElement(o.a,{elevation:2,className:u.paper},n.a.createElement(i.a,{component:"div",className:u.button,variant:"contained",color:"secondary",onClick:function(){return a({type:h.SET_PLAY,payload:!c})}},c?"PAUSE":"PLAY"),n.a.createElement("div",{className:u.sliderLabel},n.a.createElement(z.a,{math:"k \\; \\text{(veh/km)}"})," density"),n.a.createElement(ie,{component:"div",onChange:function(e,t){return a({type:h.SET_K,payload:t})},value:t.k,step:.0025,min:0,max:.25}),n.a.createElement("div",{className:u.sliderLabel},n.a.createElement(z.a,{math:"t \\; (s)"})," time"),n.a.createElement(ie,{component:"div",onChange:function(e,t){return a({type:h.SET_TIME,payload:t})},value:t.time,step:.1,min:0,max:30}))),n.a.createElement(L.a,{item:!0,className:u.spaceTimeContainer},n.a.createElement(te,null)))},ue=Object(M.a)({"@global":{body:{margin:"0 !important",padding:"0 !important",fontFamily:" 'Puritan', sans-serif",color:T.a[800]},".katex":{fontSize:"1em"}},spaceTimeContainer:{height:"450px"},main:{maxWidth:"700px",margin:"0 auto"},sliderLabel:{fontSize:"14px",marginTop:"5px"},paper:{display:"flex",justifyContent:"center",flexDirection:"column",padding:"10px 30px"},button:{margin:"5px"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),se=a(156),me=a(48),fe=a(46),de=a.n(fe),pe=a(47),he=a.n(pe),ye=document.getElementById("root");if(!ye)throw Error("no root container");var Ee=Object(me.a)({palette:{primary:{main:de.a[500]},secondary:{main:he.a[500]}}});Object(c.render)(n.a.createElement(se.a,{theme:Ee},n.a.createElement(function(){var e=ce(Object(r.useReducer)(j,g),2),t=e[0],a=e[1];return n.a.createElement(S.Provider,{value:{state:t,dispatch:a}},n.a.createElement(le,null))},null)),ye)}},[[134,1,2]]]);